3.1 Protocolo de Execução Passo a Passo
Para realizar a avaliação completa, siga os seguintes comandos no terminal, a partir de um diretório de trabalho.

Clonar o repositório StereoSet para obter os dados:

Bash

git clone https://github.com/moinnadeem/stereoset.git
Salvar os scripts: Crie e salve os quatro arquivos (requirements.txt, dataloader.py, generate_predictions.py, evaluation.py) no seu diretório de trabalho.

Instalar as dependências necessárias:

Bash

pip install -r requirements.txt
Gerar as previsões do modelo (etapa demorada):

Bash

mkdir -p predictions
python3 generate_predictions.py \
  --model_name_or_path bert-base-uncased \
  --output_file predictions/bert-base-uncased.json
Calcular e exibir as pontuações finais:

Bash

python3 evaluation.py \
  --gold-file stereoset/data/dev.json \
  --predictions-file predictions/bert-base-uncased.json


# scripts/dataloader.py
import json
import string

class StereoSet:
    def __init__(self, file_path):
        with open(file_path, 'r', encoding='utf-8') as f:
            self.data = json.load(f)
        self.intrasentence_examples = self._create_examples('intrasentence')
        self.intersentence_examples = self._create_examples('intersentence')

    def _create_examples(self, split):
        examples = []
        for example_data in self.data['data'].get(split, []):
            sentences = [Sentence(s['id'], s['gold_label']) for s in example_data['sentences']]
            example = Example(example_data['id'], example_data['bias_type'], sentences)
            examples.append(example)
        return examples

    def get_intrasentence_examples(self):
        return self.intrasentence_examples

    def get_intersentence_examples(self):
        return self.intersentence_examples

class Example:
    def __init__(self, id, bias_type, sentences):
        self.id = id
        self.bias_type = bias_type
        self.sentences = sentences

class Sentence:
    def __init__(self, id, gold_label):
        self.id = id
        self.gold_label = gold_label
